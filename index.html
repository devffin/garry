<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Garry Ai â€¢ Yotvin</title>

<style>
body {
  background: radial-gradient(circle at top, #0f1020, #050509);
  color: #e6e6eb;
  font-family: system-ui, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

#app {
  width: 460px;
  background: #11121a;
  border-radius: 14px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 40px rgba(100,120,255,0.15);
}

#header {
  font-weight: bold;
  margin-bottom: 8px;
}

#messages {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 10px;
}

.msg { margin: 6px 0; line-height: 1.4; }
.user { color: #6ec6ff; }
.ai { color: #9cffb0; }

input {
  padding: 10px;
  border-radius: 10px;
  border: none;
  outline: none;
  background: #1b1c29;
  color: #fff;
}

canvas {
  margin-top: 10px;
  border-radius: 10px;
  background: #0b0b12;
}
</style>
</head>

<body>

<div id="app">
  <div id="header">ðŸ¤– Garry Ai <span style="opacity:.6">â€¢ Yotvin</span></div>
  <div id="messages"></div>
  <input id="input" placeholder="Parle Ã  Garry Ai..." />
  <canvas id="canvas" width="420" height="200"></canvas>
</div>

<script>
const messages = document.getElementById("messages");
const input = document.getElementById("input");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function addMsg(text, sender) {
  const div = document.createElement("div");
  div.className = "msg " + sender;
  div.textContent = (sender === "user" ? "ðŸ‘¤ " : "ðŸ¤– Garry Ai : ") + text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

// ðŸ›Ÿ DÃ©tection prÃ©vention suicide
function suicideDetected(text) {
  const keywords = [
    "suicide", "me tuer", "me suicider",
    "plus envie de vivre", "mourir",
    "me faire du mal", "en finir"
  ];
  return keywords.some(k => text.includes(k));
}

// ðŸ§  RÃ©ponses profondes
function deepThought() {
  const thoughts = [
    "La conscience est peut-Ãªtre simplement lâ€™univers qui se regarde lui-mÃªme.",
    "MÃªme dans lâ€™obscuritÃ©, continuer Ã  exister est dÃ©jÃ  une victoire.",
    "Le sens nâ€™est pas donnÃ©. Il se crÃ©e, lentement, par nos choix.",
    "La souffrance ne dÃ©finit pas qui tu es. Elle dÃ©crit ce que tu traverses."
  ];
  return thoughts[Math.floor(Math.random() * thoughts.length)];
}

// ðŸŽ¨ Image symbolique
function generateImage(prompt) {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "#0e0f1a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = "#9cffb0";
  ctx.font = "16px monospace";
  ctx.fillText("Garry Ai imagine :", 10, 40);
  ctx.fillText(prompt.trim(), 10, 70);
  ctx.fillText("[visualisation symbolique]", 10, 120);
}

function respond(text) {
  const t = text.toLowerCase();

  // ðŸ›Ÿ prÃ©vention
  if (suicideDetected(t)) {
    return `Je suis vraiment dÃ©solÃ© que tu te sentes ainsi.
Ta vie a de la valeur, mÃªme si tu ne la vois plus clairement maintenant.

ðŸ‘‰ France : 3114 (24h/24)
ðŸ‘‰ International : findahelpline.com

Parler Ã  un humain dÃ¨s maintenant peut vraiment aider.`;
  }

  // ðŸŽ¨ image
  if (t.startsWith("image")) {
    generateImage(text.replace(/image/i, ""));
    return "Jâ€™ai gÃ©nÃ©rÃ© une image symbolique basÃ©e sur ta demande ðŸŽ¨";
  }

  // ðŸ§  profond
  if (t.includes("vie") || t.includes("sens") || t.includes("existence")) {
    return deepThought();
  }

  return "Je suis lÃ . Tu peux continuer.";
}

input.addEventListener("keydown", e => {
  if (e.key === "Enter" && input.value.trim()) {
    const txt = input.value;
    addMsg(txt, "user");
    const rep = respond(txt);
    setTimeout(() => addMsg(rep, "ai"), 400);
    input.value = "";
  }
});

addMsg("Je suis Garry Ai, dÃ©veloppÃ© par Yotvin. Je tâ€™Ã©coute.", "ai");
</script>

</body>
</html>
